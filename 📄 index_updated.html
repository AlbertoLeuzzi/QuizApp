<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Assistenti Sociali - Prepariamoci Pupa</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#764ba2">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>📚 Quiz Assistenti Sociali</h1>
      <p>Prepariamoci insieme per il concorso! 💪</p>
    </div>

    <div class="content">
      <div class="page active" id="home">
        <button class="btn btn-primary" onclick="showPage('menu')">🚀 Prepariamoci Pupa!</button>
      </div>

      <div class="page" id="menu">
        <button class="back-btn" onclick="showPage('home')">← Indietro</button>
        <button class="btn btn-secondary" onclick="showPage('quiz-settings')">🎯 Quiz Esame</button>
        <button class="btn btn-danger" onclick="showPage('subjects')">📖 Quiz per Materia</button>
        <button class="btn btn-warning" onclick="showStudyMode()">🔍 Modalità Studio</button>
        <button class="btn btn-warning" onclick="showStorico()">📈 Storico</button>
        
      </div>

      <div class="page" id="quiz-settings">
        <button class="back-btn" onclick="showPage('menu')">← Indietro</button>
        <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Impostazioni Quiz</h2>
        <div class="checkbox-container">
          <input type="checkbox" id="timer-enabled" checked>
          <label for="timer-enabled">⏰ Abilita cronometro (45 minuti)</label>
        </div>
        <button class="btn btn-primary" onclick="startQuizEsame()">🎯 Inizia Quiz Esame</button>
      </div>

      <div class="page" id="subjects">
        <button class="back-btn" onclick="showPage('menu')">← Indietro</button>
        <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Scegli la Materia</h2>
        <div id="subject-buttons" class="subject-grid"></div>
      </div>

      <div class="page" id="question-count">
        <button class="back-btn" onclick="showPage('subjects')">← Indietro</button>
        <h2 style="text-align: center; margin-bottom: 20px; color: #333;">Numero di Domande</h2>
        <button class="btn btn-primary" onclick="startQuizMateria(10)">▶️ 10 Domande</button>
        <button class="btn btn-primary" onclick="startQuizMateria(20)">▶️ 20 Domande</button>
        <button class="btn btn-primary" onclick="startQuizMateria(30)">▶️ 30 Domande</button>
      </div>

      <div class="page" id="quiz">
        <button class="back-btn" onclick="showPage('menu')">← Indietro</button>
        <div class="timer" id="timer" style="display: none;">
          ⏰ Tempo rimasto: <span id="time-display">45:00</span>
        </div>
        <div class="question-counter">
          Domanda <span id="current-question">1</span> di <span id="total-questions">30</span>
        </div>
        <div class="quiz-container">
          <div class="question">
            <h3 id="question-text"></h3>
            <div class="answers" id="answers"></div>
          </div>
          <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" style="display: none;">
            Prossima Domanda →
          </button>
        </div>
      </div>

      <div class="page" id="results">
        <div class="results">
          <h2>🎉 Quiz Completato!</h2>
          <div class="score" id="score-display"></div>
          <div id="score-text"></div>
          <div id="score-emoji"></div>
          <button class="btn btn-primary" onclick="showPage('menu')">🏠 Torna al Menu</button>
          <button class="btn btn-secondary" onclick="showStudyMode()" id="study-wrong-btn" style="display: none;">
            🔍 Studia Risposte Sbagliate
          </button>
        </div>
      </div>

      <div class="page" id="study">
        <button class="back-btn" onclick="showPage('menu')">← Indietro</button>
        <h2 style="text-align: center; margin-bottom: 20px; color: #333;">📚 Modalità Studio</h2>
        <div id="study-content"></div>
      </div>

      <div class="page" id="storico">
        <button class="back-btn" onclick="showPage('menu')">← Indietro</button>
        <div class="content">
          <div id="storico-materia"></div>
          <hr>
          <div id="storico-esame"></div>
<canvas id="grafico-materie" height="300"></canvas>
        </div>
      </div>

    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>